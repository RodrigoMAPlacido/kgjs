<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Authoring</title>
    <script src="codemirror/lib/codemirror.js"></script>
    <link rel="stylesheet" type="text/css" href="codemirror/lib/codemirror.css">
    <link rel="stylesheet" type="text/css" href="css/kg.0.1.4.css">
    <script src="codemirror/mode/javascript/javascript.js"></script>
    <script src="js/kg3d.0.1.4.js"></script>
    <style>

        .enclosing {
            width: 1500px;
        }

        .preview {
            width: 1000px;
            float: right;
        }

        .author {
            width: 500px;
        }

        .CodeMirror {
            width: 100%;
            height: 800px;
        }
    </style>
</head>
<body>
<div class="preview" style="text-align:right;">
    <button onclick="load('oneGraph')">One Graph</button>
    <button onclick="load('oneGraphPlusSidebar')">One Graph + Sidebar</button>
    <button onclick="load('twoVerticalGraphs')">Two Vertical Graphs</button>
</div>
<p>KINETICGRAPHS EDITOR</p>
<hr/>
<div class="enclosing">
    <div id="dest" class="kg-container preview" src="templates/oneGraph.json">Please refresh the page.</div>
    <div id="src" class="author"></div>
</div>
<script>
    const src = document.getElementById("src"),
        dest = document.getElementById("dest"),

        srcCodeMirror = CodeMirror(src, {
            mode: "javascript",
            lineNumbers: true,
            lineWrapping: true
        });

    srcCodeMirror.on("change", update);

    function update() {
        const authorJSON = JSON.parse(srcCodeMirror.getValue());
        new KG.View(dest, authorJSON)
    }

    function load(filename) {
        d3.json('examples/' + filename + '.json', function (data) {
            srcCodeMirror.setValue(JSON.stringify(data, null, 2));
            new KG.View(dest, data);
        });
    }

    load('oneGraph');


</script>
</body>
</html>
