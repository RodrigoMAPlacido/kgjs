<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Authoring</title>
    <script src="codemirror/lib/codemirror.js"></script>
    <link rel="stylesheet" type="text/css" href="codemirror/lib/codemirror.css">
    <link rel="stylesheet" type="text/css" href="../build/bundled/kg.0.1.4.css">
    <script src="codemirror/mode/javascript/javascript.js"></script>
    <script src="../build/bundled/kg3d.0.1.4.js"></script>
    <style>

        .enclosingDiv {
            position: relative;
            margin-left: auto;
            margin-right: auto;
        }

        .leftBox {
            width: 28%;
            height: 500px;
        }

        .rightBox {
            float:right;
            width: 70%;
        }

        .CodeMirror {
            height: 500px;
        }
    </style>
</head>
<body>
<p>This is stuff above.</p>
<div id="authorBox" class="enclosingDiv">

    <div id="dest" class="rightBox kg-container"></div>
    <div id="src" class="leftBox"></div>
</div>
<p>This is stuff below</p>
<script>
    const authorBox = document.getElementById("authorBox"),
        src = document.getElementById("src"),
        dest = document.getElementById("dest")

    function update() {
        const authorJSON = JSON.parse(srcCodeMirror.getValue());
        view = new KG.View(dest, authorJSON)
    }

    var srcCodeMirror = CodeMirror(src, {
        value: '{"foo":"bar"}',
        mode: "javascript",
        lineNumbers: true,
        lineWrapping: true
    });

    srcCodeMirror.on("change", update);

    update();


</script>
</body>
</html>
